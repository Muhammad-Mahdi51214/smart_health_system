{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\muham\\\\OneDrive\\\\Desktop\\\\My Code\\\\Web_Tech_Project\\\\frontend\\\\src\\\\components\\\\HospitalMap.js\";\nimport React from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Circle, CircleMarker } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// Fix for default marker icon\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\nfunction HospitalMap({\n  hospitals = [],\n  userLocation\n}) {\n  // âœ… FILTER OUT BAD RECORDS (CRITICAL FIX)\n  const validHospitals = hospitals.filter(h => h.latitude !== null && h.longitude !== null && !isNaN(h.latitude) && !isNaN(h.longitude));\n\n  // âœ… SAFE MAP CENTER (NEVER UNDEFINED)\n  const center = userLocation ? userLocation : validHospitals.length > 0 ? [Number(validHospitals[0].latitude), Number(validHospitals[0].longitude)] : [33.6844, 73.0479]; // Islamabad fallback\n\n  if (validHospitals.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"No hospitals with valid location found\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: '400px',\n      width: '100%',\n      marginTop: '20px',\n      marginBottom: '20px'\n    },\n    children: /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: center,\n      zoom: 12,\n      style: {\n        height: '100%',\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 8\n      }, this), validHospitals.map(hospital => /*#__PURE__*/_jsxDEV(Marker, {\n        position: [Number(hospital.latitude), Number(hospital.longitude)],\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: hospital.hospital_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 58\n            }, this), hospital.address, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 35\n            }, this), hospital.phone && `ðŸ“ž ${hospital.phone}`, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 59\n            }, this), hospital.distance && `Distance: ${hospital.distance.toFixed(2)} km`]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this)\n      }, hospital.hospital_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this)), userLocation && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(CircleMarker, {\n          center: userLocation,\n          radius: 8,\n          pathOptions: {\n            color: 'red',\n            fillColor: 'red',\n            fillOpacity: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Circle, {\n          center: userLocation,\n          radius: 1000,\n          pathOptions: {\n            color: 'blue',\n            fillColor: 'blue',\n            fillOpacity: 0.2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n}\n_c = HospitalMap;\nexport default HospitalMap;\nvar _c;\n$RefreshReg$(_c, \"HospitalMap\");","map":{"version":3,"names":["React","MapContainer","TileLayer","Marker","Popup","Circle","CircleMarker","L","jsxDEV","_jsxDEV","Fragment","_Fragment","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","HospitalMap","hospitals","userLocation","validHospitals","filter","h","latitude","longitude","isNaN","center","length","Number","children","fileName","_jsxFileName","lineNumber","columnNumber","style","height","width","marginTop","marginBottom","zoom","url","attribution","map","hospital","position","hospital_name","address","phone","distance","toFixed","hospital_id","radius","pathOptions","color","fillColor","fillOpacity","_c","$RefreshReg$"],"sources":["C:/Users/muham/OneDrive/Desktop/My Code/Web_Tech_Project/frontend/src/components/HospitalMap.js"],"sourcesContent":["import React from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup, Circle, CircleMarker } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport L from 'leaflet';\r\n\r\n// Fix for default marker icon\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\r\n});\r\n\r\nfunction HospitalMap({ hospitals = [], userLocation }) {\r\n\r\n  // âœ… FILTER OUT BAD RECORDS (CRITICAL FIX)\r\n  const validHospitals = hospitals.filter(h =>\r\n    h.latitude !== null &&\r\n    h.longitude !== null &&\r\n    !isNaN(h.latitude) &&\r\n    !isNaN(h.longitude)\r\n  );\r\n\r\n  // âœ… SAFE MAP CENTER (NEVER UNDEFINED)\r\n  const center = userLocation\r\n    ? userLocation\r\n    : validHospitals.length > 0\r\n      ? [Number(validHospitals[0].latitude), Number(validHospitals[0].longitude)]\r\n      : [33.6844, 73.0479]; // Islamabad fallback\r\n\r\n  if (validHospitals.length === 0) {\r\n    return <div>No hospitals with valid location found</div>;\r\n  }\r\n\r\n  return (\r\n    <div style={{ height: '400px', width: '100%', marginTop: '20px', marginBottom: '20px' }}>\r\n      <MapContainer\r\n        center={center}\r\n        zoom={12}\r\n        style={{ height: '100%', width: '100%' }}\r\n      >\r\n       <TileLayer\r\n      url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n/>\r\n\r\n        {/* âœ… SAFE HOSPITAL MARKERS */}\r\n        {validHospitals.map((hospital) => (\r\n          <Marker\r\n            key={hospital.hospital_id}\r\n            position={[\r\n              Number(hospital.latitude),\r\n              Number(hospital.longitude)\r\n            ]}\r\n          >\r\n            <Popup>\r\n              <div>\r\n                <strong>{hospital.hospital_name}</strong><br />\r\n                {hospital.address}<br />\r\n                {hospital.phone && `ðŸ“ž ${hospital.phone}`}<br />\r\n                {hospital.distance && `Distance: ${hospital.distance.toFixed(2)} km`}\r\n              </div>\r\n            </Popup>\r\n          </Marker>\r\n        ))}\r\n\r\n        {/* âœ… USER LOCATION â€” CORRECT WAY */}\r\n        {userLocation && (\r\n          <>\r\n            {/* Red Dot */}\r\n            <CircleMarker\r\n              center={userLocation}\r\n              radius={8}\r\n              pathOptions={{ color: 'red', fillColor: 'red', fillOpacity: 1 }}\r\n            />\r\n\r\n            {/* Blue Buffer */}\r\n            <Circle\r\n              center={userLocation}\r\n              radius={1000}\r\n              pathOptions={{ color: 'blue', fillColor: 'blue', fillOpacity: 0.2 }}\r\n            />\r\n          </>\r\n        )}\r\n\r\n      </MapContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HospitalMap;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}